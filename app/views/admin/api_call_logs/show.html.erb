<h1>API Call Log Details</h1>

<div class="card">
  <div class="card-body">
    <h5 class="card-title">Basic Information</h5>
    <p><strong>ID:</strong> <%= @api_call_log.id %></p>
    <p><strong>API Type:</strong> <%= @api_call_log.api_type %></p>
    <p><strong>Endpoint:</strong> <%= @api_call_log.endpoint %></p>
    <p>
      <strong>Status:</strong>
      <span class="badge <%= @api_call_log.status == 'success' ? 'bg-success' : 'bg-danger' %>">
        <%= @api_call_log.status %>
      </span>
    </p>
    <p><strong>Called At:</strong> <%= @api_call_log.called_at.strftime('%Y-%m-%d %H:%M:%S') %></p>

    <% if @api_call_log.simple_transaction %>
      <p>
        <strong>Transaction:</strong>
        <%= link_to "Transaction ##{@api_call_log.simple_transaction_id}", admin_simple_transaction_path(@api_call_log.simple_transaction), class: 'btn btn-sm btn-primary' %>
      </p>
    <% end %>
  </div>
</div>

<div class="card mt-3">
  <div class="card-body">
    <h5 class="card-title">Request Body</h5>
    <pre><%= @api_call_log.request_body %></pre>
  </div>
</div>

<div class="card mt-3">
  <div class="card-body">
    <h5 class="card-title">Response Body</h5>
    <pre><%= @api_call_log.response_body %></pre>
  </div>
</div>

<div class="mt-3" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #dee2e6;">
  <h3 style="margin-bottom: 15px; color: #6c757d; font-size: 1em;">画面遷移</h3>
  <%= link_to 'API履歴一覧', admin_api_call_logs_path, class: 'btn btn-secondary', style: "margin-right: 10px;" %>
  <%= link_to '取引一覧', admin_simple_transactions_path, class: 'btn btn-secondary', style: "margin-right: 10px;" %>
  <%= link_to 'ユーザー画面', new_simple_transaction_path, class: 'btn btn-success' %>
</div>
